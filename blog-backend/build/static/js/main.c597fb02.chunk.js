(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{58:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(14),a=n.n(c),i=n(10),o=n(3),s=n.n(o),u=n(7),l=n(4),d=n(2),b=n(1),j=Object(r.forwardRef)((function(e,t){var n=Object(r.useState)(!1),c=Object(l.a)(n,2),a=c[0],i=c[1],o={display:a?"none":""},s={display:a?"":"none"},u=function(){i(!a)};return Object(r.useImperativeHandle)(t,(function(){return{toggleVisibility:u}})),Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{style:o,children:Object(b.jsx)("button",{onClick:u,children:e.buttonLabel})}),Object(b.jsx)("div",{className:"hiddenByDefault",style:a?{display:""}:{display:"none"},children:Object(b.jsxs)("div",{style:s,className:"togglableContent",children:[e.children,Object(b.jsx)("button",{onClick:u,children:e.cancelButtonLabel})]})})]})}));j.displayName="Togglable";var f=j,h=function(e){var t=e.blog,n=e.blogUpdate,r=e.blogRemove;return Object(b.jsxs)("div",{style:{paddingTop:10,paddingLeft:2,border:"solid",borderWidth:1,marginBottom:5},className:"blog-container",children:[Object(b.jsxs)("div",{children:[Object(b.jsxs)("strong",{children:[t.title," "]}),"by",Object(b.jsxs)("strong",{children:[" ",t.author]})]}),Object(b.jsxs)(f,{buttonLabel:"View",cancelButtonLabel:"Hide",children:[Object(b.jsxs)("p",{children:["Url: ",t.url]}),Object(b.jsxs)("p",{className:"likeContainer",children:[1===t.likes?"".concat(t.likes," like"):"".concat(t.likes," likes"),Object(b.jsx)("button",{onClick:function(){var e=Object(i.a)(Object(i.a)({},t),{},{likes:t.likes+=1});n(t.id,e)},className:"likeButton",children:"Like"})]}),Object(b.jsxs)("p",{children:["User: ",t.user.username]}),Object(b.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(t.title," by ").concat(t.author,"?"))&&r(t.id)},children:"Remove"})]})]})},p=function(e){var t=e.handleSubmit,n=e.handleUsernameChange,r=e.handlePasswordChange,c=e.username,a=e.password;return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Login"}),Object(b.jsxs)("form",{onSubmit:t,children:[Object(b.jsxs)("div",{children:["Username:",Object(b.jsx)("input",{id:"username",value:c,onChange:n})]}),Object(b.jsxs)("div",{children:["Password:",Object(b.jsx)("input",{id:"password",type:"password",value:a,onChange:r})]}),Object(b.jsx)("button",{id:"login-button",type:"submit",children:"Log In"})]})]})},O=function(e){var t=e.createBlog,n=Object(r.useState)(""),c=Object(l.a)(n,2),a=c[0],i=c[1],o=Object(r.useState)(""),s=Object(l.a)(o,2),u=s[0],d=s[1],j=Object(r.useState)(""),f=Object(l.a)(j,2),h=f[0],p=f[1];return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Add a new blog"}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({title:a,author:u,url:h}),i(""),d(""),p("")},id:"form",children:[Object(b.jsxs)("p",{children:["Title:"," ",Object(b.jsx)("input",{id:"titleInput",value:a,onChange:function(e){console.log(e.target.value),i(e.target.value)},className:"titleInput"})]}),Object(b.jsxs)("p",{children:["Author:"," ",Object(b.jsx)("input",{id:"authorInput",value:u,onChange:function(e){console.log(e.target.value),d(e.target.value)},className:"authorInput"})]}),Object(b.jsxs)("p",{children:["Url:"," ",Object(b.jsx)("input",{id:"urlInput",value:h,onChange:function(e){console.log(e.target.value),p(e.target.value)},className:"urlInput"})]}),Object(b.jsx)("button",{id:"newBlogButton",type:"submit",children:"Add"})]})]})},g=n(11),x=function(){var e=Object(g.c)((function(e){return e.notification})),t=e.notificationText,n=e.notificationType;return t&&Object(b.jsx)("div",{style:{backgroundColor:"rgb(197, 188, 188)",fontSize:"1.5rem",width:"30%",color:"".concat(n),borderRadius:"4px",marginBottom:"2%",borderWidth:"2px",borderStyle:"solid",borderColor:"".concat(n)},children:t})},v=n(12),m=function(e){var t=e.users.map((function(e){return Object(b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr, 3fr"},children:[Object(b.jsx)(v.b,{to:"/users/".concat(e.id),children:Object(b.jsx)("p",{children:e.username})}),Object(b.jsx)("p",{children:e.blogs.length})]},e.id)}));return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Users"}),Object(b.jsx)("div",{style:{marginLeft:"20%"},children:Object(b.jsx)("b",{children:"Blogs created"})}),Object(b.jsx)("div",{children:t})]})},w=function(e){var t=e.author;return t?Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:t.username}),0!==t.blogs.length&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h3",{children:"Added blogs"}),Object(b.jsx)("ul",{children:t.blogs.map((function(e){return Object(b.jsx)("li",{children:e.title},e.id)}))})]})]}):null},y=n(9),k=n.n(y),S={login:function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},B="/api/blogs",C=null,T={getAll:function(){return k.a.get(B).then((function(e){return e.data}))},setToken:function(e){return C="bearer ".concat(e)},remove:function(e){var t={headers:{Authorization:C}};return k.a.delete("".concat(B,"/").concat(e),t).then((function(e){return e.data}))},update:function(e,t){return k.a.put("".concat(B,"/").concat(e),t).then((function(e){return e.data}))},create:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:C}},e.next=3,k.a.post(B,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},I="/api/users",L=null,A={getAll:function(){return k.a.get(I).then((function(e){return e.data}))},create:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:L}},e.next=3,k.a.post(I,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){return k.a.put("".concat(I,"/").concat(e),t).then((function(e){return e.data}))},setToken:function(e){L="bearer ".concat(e)},remove:function(e){var t={headers:{Authorization:L}};return k.a.delete("".concat(I,"/").concat(e),t).then((function(e){return e.data}))}},U=function(e,t,n){return function(){var r=Object(u.a)(s.a.mark((function r(c){return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:c({type:"SHOW",data:{notificationText:e,notificationType:n},time:setTimeout((function(){return c(N())}),1e3*t)});case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},N=function(){return{type:"HIDE"}},D={notificationText:null,notificationType:"red"},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW":return t.data;case"HIDE":return Object(i.a)({notificationType:"transparent"},D);default:return e}},E=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),o=Object(l.a)(a,2),j=o[0],v=o[1],y=Object(r.useState)(""),k=Object(l.a)(y,2),B=k[0],C=k[1],I=Object(r.useState)(null),L=Object(l.a)(I,2),N=L[0],D=L[1],R=Object(r.useState)([]),E=Object(l.a)(R,2),H=E[0],W=E[1],z=Object(r.useRef)();Object(r.useEffect)((function(){T.getAll().then((function(e){return c(e)}))}),[]),Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogappUser");if(e){var t=JSON.parse(e);D(t),T.setToken(t.token)}}),[]),Object(r.useEffect)((function(){(function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getAll();case 2:t=e.sent,W(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var J=Object(g.b)(),P=function(){var e=Object(u.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z.current.toggleVisibility(),""===t.title||""===t.author||""===t.url){e.next=9;break}return e.next=4,T.create(t);case 4:r=e.sent,c(n.concat(r)),J(U("A new blog ".concat(t.title," by ").concat(t.author," added"),5,"green")),e.next=10;break;case 9:J(U("You must fill all fields in order to add a blog",5,"red"));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(u.a)(s.a.mark((function e(t,r){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.update(t,r);case 2:a=Object(i.a)(Object(i.a)({},r),{},{blogId:t}),c(n.map((function(e){return e.id===a.id?a:e})));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(u.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.remove(t);case 2:r=n.filter((function(e){return e.id===t})),c(n.filter((function(e){return e.id!==t}))),J(U("Blog ".concat(r[0].title," by ").concat(r[0].author," was succesfully deleted"),5,"green"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,S.login({username:j,password:B});case 4:n=e.sent,window.localStorage.setItem("loggedBlogAppUser",JSON.stringify(n)),T.setToken(n.token),D(n),v(""),C(""),J(U("User ".concat(n.username," is logged in"),5,"green")),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),J(U("Wrong username or password",5,"red"));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),Y=Object(d.f)("/users/:id"),q=Y?H.find((function(e){return e.id===Y.params.id})):null;return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Blogs"}),N&&Object(b.jsxs)("div",{children:[N.name," is logged in",Object(b.jsx)("button",{onClick:function(){window.localStorage.removeItem("loggedBlogappUser"),document.location.reload()},children:"Logout"})]}),Object(b.jsx)(x,{}),Object(b.jsxs)(d.c,{children:[Object(b.jsx)(d.a,{path:"/users/:id",element:Object(b.jsx)(w,{author:q})}),Object(b.jsx)(d.a,{path:"/users",element:Object(b.jsx)(m,{users:H})}),Object(b.jsx)(d.a,{path:"/",element:Object(b.jsx)("div",{children:null===N?Object(b.jsx)(f,{buttonLabel:"Log in",ref:z,cancelButtonLabel:"cancel",children:Object(b.jsx)(p,{username:j,password:B,handleUsernameChange:function(e){var t=e.target;return v(t.value)},handlePasswordChange:function(e){var t=e.target;return C(t.value)},handleSubmit:M})}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(f,{buttonLabel:"New blog",cancelButtonLabel:"cancel",ref:z,children:Object(b.jsx)(O,{createBlog:P})}),Object(b.jsx)("div",{children:n.sort((function(e,t){return t.likes-e.likes})).filter((function(e){return e.user.username===N.username})).map((function(e){return Object(b.jsx)(h,{blog:e,blogUpdate:V,blogRemove:F},e.id)}))})]})})})]})]})},H=n(13),W=n(29),z=n(28),J=Object(H.combineReducers)({notification:R}),P=Object(H.createStore)(J,Object(z.composeWithDevTools)(Object(H.applyMiddleware)(W.a)));n(58);a.a.render(Object(b.jsx)(v.a,{children:Object(b.jsx)(g.a,{store:P,children:Object(b.jsx)(E,{})})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.c597fb02.chunk.js.map